<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>What kind of a progger are you?</title>
    <style>
      body { 
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        min-height: 100vh;
        background: #f5f6fa;
      }
      #content-container {
        max-width: 500px;
        margin: 40px auto 0 auto;
        background: white;
        padding: 30px 32px 32px 32px;
        border-radius: 15px;
        box-shadow: 0 8px 32px 0 rgba(60,60,100,0.10);
      }
      h1, h2 {
        text-align: center;
        margin-top: 0;
      }
      .intro, .question {
        margin-bottom: 18px;
        text-align: center;
      }
      .answer-btn, .start-btn { 
        display: block;
        margin: 12px auto 0 auto;
        padding: 10px;
        width: 90%;
        max-width: 260px;
        background: #4f8cff;
        color: white;
        border: none;
        border-radius: 7px;
        font-size: 1em;
        cursor: pointer;
        transition: background 0.16s;
      }
      .answer-btn:hover, .start-btn:hover {
        background: #366ed6;
      }
    </style>
  </head>
  <body>
    <div id="content-container"></div>
    <script>
      // Define sub-questionnaires. Each sub-questionnaire has a title and an array of questions.
      const subQuestionnaires = [
        {
          title: "Harmonic Complexity section",
          questions: [
            {
              question: "Do you like jazz chords?",
              answers: { 
                "love them":   { next: 1, score: 20 },
                "like them":   { next: 1, score: 15 },
                "not necessary":   { next: 1, score: 10 },
                "dislike them":  { next: 1, score: 5 },
                "hate them": { next: 1, score: 0 }
              }
            },
            {
              question: "Do you like exotic scales?",
              answers: { 
                "love them":   { next: 2, score: 20 },
                "like them":   { next: 2, score: 15 },
                "find them unnecessary":   { next: 2, score: 10 },
                "dislike them":  { next: 2, score: 5 },
                "cannot stand them": { next: 2, score: 0 }
              }
            },
            {
              question: "Do you like borrowed chords?",
              answers: { 
                "ohh!":   { next: 3, score: 20 },
                "interesting":   { next: 3, score: 15 },
                "mid":   { next: 3, score: 10 },
                "overrated imo":  { next: 3, score: 5 },
                "I have no idea what they mean": { next: 3, score: 0 }
              }
            },
            {
              question: "How do you like modulations?",
              answers: { 
                "love 'em":   { next: 4, score: 20 },
                "like 'em":   { next: 4, score: 15 },
                "a whole step up, what's so special about 'em?":   { next: 4, score: 10 },
                "what is it, the early 00's?":  { next: 4, score: 5 },
                "i lack basic neural functions": { next: 4, score: 0 }
              }
            },            
            {
              question: "Polychords?",
              answers: {
                "yes please!":   { next: 5, score: 20 },
                "oh, wizardly stuff!":   { next: 5, score: 15 },
                "don't mind 'em":   { next: 5, score: 15 },
                "a little too dissonant":   {  next: 5, score: 5 },
                "i'm a swiftie":  { next: 5, score: 0 }
              }
            },
            {
              question: "Microtonal music?",
              answers: {
                "touches the soul":   { next: 6, score: 20 },
                "a beautiful form of expression":   { next: 6, score: 15},
                "don't mind it":   { next: 6, score: 10 },
                "sounds out of tune":   { next: 6, score: 5 },
                "i deserve to be institutionalised":   { next: 6, score: 0 }
              }
            },
            {
              question: "Neo-riemannian theory?",
              answers: {
                "really important for understandi... sth sth":   { next: 7, score: 20 },
                "interesting but not very useful":   { next: 7, score: 15 },
                "not interested":   { next: 7, score: 10 },
                "i am a wanker (not interested in theory in general)":   { next: 7, score: 5 },
                "my father was right in leaving me":   { next: 7, score: 0 }
              }
            },
            {
              question: "Non-conventional triads like lydian and phrigian triads?",
              answers: {
                "spicy!":   { next: 8, score: 20 },
                "nice":   { next: 8, score: 15 },
                "meh":   { next: 8, score: 10 },
                "no":   { next: 8, score: 5 },
                "as a child i slightly enjoyed being bullied":   { next: 8, score: 0 }
              }
            },
            {
              question: "How about chromatic mediants?",
              answers: {
                "such colorful chords!":   { next: 9, score: 20 },
                "good":   { next: 9, score: 15 },
                "a bit cliche":   { next: 9, score: 10 },
                "wow every 19th century german music, how innovative":   { next: 9, score: 5 },
                "i touch stove, i get burned, i touch it again to check if hot":   { next: 8, score: 0 }
              }
            },
            {
              question: "How do you like voice leading and contrapuntal works?",
              answers: { 
                "makes my ass spasm":   { next: null, score: 20 },
                "they sound nice":   { next: null, score: 15 },
                "indifferent":   { next: null, score: 10 },
                "they are kinda confusing":  { next: null, score: 5 },
                "my lord created me with barely any finnese": { next: null, score: 0 }
              }
            }
          ]
        },
        {
          title: "Sub-Questionnaire 2: Daily Habits",
          questions: [
            {
              question: "Do you enjoy exercising?",
              answers: { 
                "Yes": { next: 1, score: 10 }, 
                "No":  { next: 1, score: 3 }
              }
            },
            {
              question: "How often do you read books?",
              answers: { 
                "Daily":  { next: null, score: 10 },
                "Weekly": { next: null, score: 5 },
                "Rarely": { next: null, score: 2 }
              }
            }
          ]
        }
      ];

      // Tracking variables for questionnaires.
      let currentSubQuestionnaireIndex = 0; // current sub-questionnaire index
      let currentQuestionIndex = 0; // current question index for the sub-questionnaire
      let scores = subQuestionnaires.map(() => 0); // individual scores per sub-questionnaire

      // Function to display the introduction page.
      function displayIntroduction() {
        const container = document.getElementById('content-container');
        container.innerHTML = "";
      
        // Introduction content.
        const introEl = document.createElement('div');
        introEl.className = "intro";
        introEl.innerHTML = "<h1>Welcome to the Prog test!</h1><p>Prog is a weird phenomenon. Over the years prog meant different things to different people. To some it meant literally proggresive, innovative music; while for others, it meant the music that resembles the music of the foundingfathers of the genre.<p>While this meant great variety in prog music itself; prog artists, who tend more to experiment with their art then others, were crammed under the same umbrella term while carrying different aesthetic concerns. This made for listeners to find music they enjoy harder at the same time creating a polluted space in which artists were not easily discovered by the audience.<p>This test is made to provide a rigorous categorization of different prog sub-types, thereof addressing the issues discussed above by testing different sensibilites of the questionee in different sections. <p>When you're ready, click the button below to start.</p>";
        container.appendChild(introEl);
      
        // Start button to begin the questionnaire.
        const startButton = document.createElement('button');
        startButton.className = "start-btn";
        startButton.textContent = "Start the Test";
        startButton.onclick = function() {
          // Begin by resetting tracking variables and displaying the first question.
          currentSubQuestionnaireIndex = 0;
          currentQuestionIndex = 0;
          scores = subQuestionnaires.map(() => 0);
          displayQuestion();
        };
        container.appendChild(startButton);
      }
      
      // Function to display the current question
      function displayQuestion() {
        const container = document.getElementById('content-container');
        container.innerHTML = "";
      
        // Check if we've completed all sub-questionnaires.
        if (currentSubQuestionnaireIndex >= subQuestionnaires.length) {
          displayResults();
          return;
        }
      
        const currentSub = subQuestionnaires[currentSubQuestionnaireIndex];
        const currentQuestion = currentSub.questions[currentQuestionIndex];
      
        // Display sub-questionnaire title.
        const titleEl = document.createElement('h2');
        titleEl.textContent = currentSub.title;
        container.appendChild(titleEl);
      
        // Display the question.
        const questionEl = document.createElement('div');
        questionEl.className = "question";
        questionEl.innerHTML = `<p>${currentQuestion.question}</p>`;
        container.appendChild(questionEl);
      
        // Create answer buttons.
        for (let answer in currentQuestion.answers) {
          const button = document.createElement('button');
          button.className = "answer-btn";
          button.textContent = answer;
          button.onclick = function() {
            // Update score for the current sub-questionnaire.
            scores[currentSubQuestionnaireIndex] += currentQuestion.answers[answer].score;
            let nextIndex = currentQuestion.answers[answer].next;
            if (nextIndex !== null && nextIndex !== undefined && nextIndex < currentSub.questions.length) {
              // Move to the next question.
              currentQuestionIndex = nextIndex;
              displayQuestion();
            } else {
              // End of sub-questionnaire; move to the next one.
              currentSubQuestionnaireIndex++;
              currentQuestionIndex = 0;
              displayQuestion();
            }
          };
          container.appendChild(button);
        }
      }
      
      // Function to display questionnaire results.
      function displayResults() {
        const container = document.getElementById('content-container');
        container.innerHTML = "<h2>Results</h2>";
        subQuestionnaires.forEach((subQ, index) => {
          const resultEl = document.createElement('p');
          resultEl.textContent = `${subQ.title}: ${scores[index]} points`;
          container.appendChild(resultEl);
        });
        container.innerHTML += "<p>Thank you for completing the questionnaires!</p>";
      }
      
      // Begin with the introduction page when the page loads.
      window.onload = displayIntroduction;
    </script>
  </body>
</html>
